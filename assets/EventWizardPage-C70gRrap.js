import{j as e}from"./ui-vendor-S6RcKJ66.js";import{b as s,j as a,u as i}from"./react-vendor-Bp2pLdQf.js";import{F as t,E as n}from"./EventFormWizard-D9flSUJg.js";import{e as r}from"./patientService-DRmqe-yV.js";import{l as c}from"./index-BUM1Zou3.js";import{a as o}from"./notificationErrorHandler-CUxakbpX.js";import"./CustomSelect-DZs_yCVn.js";import"./DateRangePicker-BtS5Z8zg.js";import"./PatientListPage-CyoB6mN8.js";import"./useQuery-nLEHhc2w.js";import"./useMutation-DbOamNzM.js";import"./filterQueryService-BrMHoLIc.js";import"./wizard-DwN_BpxF.js";import"./supabase-BkmsdzLq.js";const l=()=>{const l=function(){const e=i();return s.useCallback(s=>{if(e)return e(s),void 0;const a=s.startsWith("/")?s.slice(1):s;window.location.hash=a||"home"},[e])}(),[d]=a(),[m,v]=s.useState(!1),[j,u]=s.useState("");s.useEffect(()=>{const e=d.get("patientId");u(e||"")},[d]);const h=s.useCallback(async e=>{try{c.info("Creating new event",{data:e}),await r.createEvento(e),o("Evento creato con successo"),l("/eventi-clinici")}catch(s){throw c.error("Error submitting event form",s),s}},[l]),p=s.useCallback(()=>{l("/eventi-clinici")},[l]),x=((e=t.BREAKPOINTS.MOBILE_MAX)=>{const[a,i]=s.useState(()=>"undefined"!=typeof window&&window.innerWidth<e);return s.useEffect(()=>{const s=()=>{i(window.innerWidth<e)};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[e]),a})();return e.jsxs("div",{className:"event-wizard-page-container",children:[x&&e.jsx(e.Fragment,{children:m?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Caricamento..."})}),e.jsx("p",{className:"text-muted",children:"Caricamento dati evento in corso..."})]}):e.jsx(n,{patientId:j,event:void 0,onSubmit:h,onCancel:p})}),!x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"event-form-hero",children:e.jsx("div",{className:"event-form-hero-content",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"event-form-title",children:m?"Caricamento...":"Nuovo Evento Clinico"}),e.jsx("p",{className:"event-form-subtitle",children:m?"Attendere il caricamento dei dati...":"Compila il form per aggiungere un nuovo evento clinico al sistema"})]}),e.jsxs("button",{type:"button",className:"event-form-back-button",onClick:p,disabled:m,"aria-label":"Torna alla lista eventi",children:[e.jsx("span",{className:"material-icons align-middle me-1",children:"arrow_back"}),e.jsx("span",{className:"back-button-text",children:"Torna agli eventi"})]})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 col-lg-10 col-xl-8 mx-auto",children:e.jsxs("div",{className:"event-form-card",children:[e.jsx("div",{className:"event-form-card-header",children:e.jsxs("div",{className:"event-form-card-title-wrapper",children:[e.jsx("div",{className:"event-form-card-icon",children:e.jsx("span",{className:"material-icons",children:"add_circle"})}),e.jsx("h2",{className:"event-form-card-title",children:m?"Caricamento...":"Nuovo Evento"})]})}),e.jsx("div",{className:"event-form-card-body",children:e.jsxs("div",m?{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Caricamento..."})}),e.jsx("p",{className:"text-muted",children:"Caricamento dati evento in corso..."})]}:{className:"text-center py-5",children:[e.jsxs("p",{className:"text-muted",children:["La versione desktop del form eventi Ã¨ in fase di sviluppo.",e.jsx("br",{}),"Utilizza la versione mobile per creare o modificare eventi."]}),e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:p,children:[e.jsx("span",{className:"material-icons align-middle me-2",children:"arrow_back"}),"Torna agli eventi"]})]})})]})})})]})]})};export{l as EventWizardPage,l as default};
