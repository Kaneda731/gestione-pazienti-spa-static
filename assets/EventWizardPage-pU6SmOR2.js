import{j as e}from"./ui-vendor-CgDpQ-gO.js";import{u as a,j as s,b as i}from"./react-vendor-bU8fvvPN.js";import{E as t}from"./EventFormWizard-CifOYo6I.js";import{e as n}from"./patientService-DujFtk8E.js";import{l as r}from"./index-dr_qUKEf.js";import{u as c}from"./useResponsive-DDHaZ65L.js";import"./CentralizedStatisticsService-B5FDLWH-.js";import"./DateRangePicker-BmjdJAjQ.js";import"./WizardStepper-hBeYqTh9.js";import"./useQuery-xwCzpuZZ.js";import"./useNotification-YAoj5aDM.js";import"./supabase-DpMRTrmd.js";const l=()=>{const l=a(),[o]=s(),[d,m]=i.useState(!1),[v,p]=i.useState(""),[j,x]=i.useState(void 0);i.useEffect(()=>{const e=o.get("patientId"),a=o.get("type");p(e||""),!a||"intervento"!==a&&"infezione"!==a||x(a)},[o]);const h=i.useCallback(async e=>{try{r.info("Creating new event",{data:e}),await n.createEvento(e),l("/eventi-clinici")}catch(a){throw r.error("Error submitting event form",a),a}},[l]),u=i.useCallback(()=>{l("/eventi-clinici")},[l]),N=c();return e.jsxs("div",{className:"event-wizard-page-container",children:[N.isMobile&&e.jsx(e.Fragment,{children:d?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Caricamento..."})}),e.jsx("p",{className:"text-muted",children:"Caricamento dati evento in corso..."})]}):e.jsx(t,{patientId:v,event:void 0,onSubmit:h,onCancel:u,initialEventType:j})}),!N.isMobile&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"event-form-hero",children:e.jsx("div",{className:"event-form-hero-content",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"event-form-title",children:d?"Caricamento...":"Nuovo Evento Clinico"}),e.jsx("p",{className:"event-form-subtitle",children:d?"Attendere il caricamento dei dati...":"Compila il form per aggiungere un nuovo evento clinico al sistema"})]}),e.jsxs("button",{type:"button",className:"event-form-back-button",onClick:u,disabled:d,"aria-label":"Torna alla lista eventi",children:[e.jsx("span",{className:"material-icons align-middle me-1",children:"arrow_back"}),e.jsx("span",{className:"back-button-text",children:"Torna agli eventi"})]})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 col-lg-10 col-xl-8 mx-auto",children:e.jsxs("div",{className:"event-form-card",children:[e.jsx("div",{className:"event-form-card-header",children:e.jsxs("div",{className:"event-form-card-title-wrapper",children:[e.jsx("div",{className:"event-form-card-icon",children:e.jsx("span",{className:"material-icons",children:"add_circle"})}),e.jsx("h2",{className:"event-form-card-title",children:d?"Caricamento...":"Nuovo Evento"})]})}),e.jsx("div",{className:"event-form-card-body",children:e.jsxs("div",d?{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Caricamento..."})}),e.jsx("p",{className:"text-muted",children:"Caricamento dati evento in corso..."})]}:{className:"text-center py-5",children:[e.jsxs("p",{className:"text-muted",children:["La versione desktop del form eventi Ã¨ in fase di sviluppo.",e.jsx("br",{}),"Utilizza la versione mobile per creare o modificare eventi."]}),e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:u,children:[e.jsx("span",{className:"material-icons align-middle me-2",children:"arrow_back"}),"Torna agli eventi"]})]})})]})})})]})]})};export{l as EventWizardPage,l as default};
