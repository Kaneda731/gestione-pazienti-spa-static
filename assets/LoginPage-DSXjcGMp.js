import{j as e}from"./ui-vendor-S6RcKJ66.js";import{u as a,b as s}from"./react-vendor-Bp2pLdQf.js";import{u as t,l as i,g as o,s as n,a as r}from"./index-RlMHqPIs.js";import"./supabase-Zkii_ZbW.js";const l=()=>{const l=a(),{isAuthenticated:c}=t();return s.useEffect(()=>{c&&l("/home")},[c,l]),e.jsx("div",{className:"container-fluid vh-100 d-flex align-items-center justify-content-center bg-light",children:e.jsx("div",{className:"row w-100",children:e.jsx("div",{className:"col-12 col-md-8 col-lg-6 col-xl-4 mx-auto",children:e.jsx("div",{className:"card shadow-lg border-0",children:e.jsxs("div",{className:"card-body p-5 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"material-icons text-primary",style:{fontSize:"4rem"},children:"lock"})}),e.jsx("h1",{className:"h3 mb-3 fw-normal",children:"PatientTrack"}),e.jsx("p",{className:"text-muted mb-4",children:"Sistema di gestione pazienti"}),e.jsxs("button",{type:"button",className:"btn btn-primary btn-lg w-100 mb-3",onClick:async e=>{e.target.disabled=!0;try{const e="1096813530815-bk23h9jv77okogb6pb2k0mtqbb5fo1n0.apps.googleusercontent.com";if(!0&&e){i.info("üöÄ LoginPage: avvio flow GIS diretto");try{const{idToken:a,nonce:s}=await o({clientId:e}),{error:t}=await n.auth.signInWithIdToken({provider:"google",token:a,nonce:s});if(t)throw i.warn("‚ùå Errore Supabase signInWithIdToken:",t),t;return i.info("‚úÖ LoginPage: Login GIS completato"),void 0}catch(a){i.warn("‚ùå LoginPage: Errore GIS, fallback a OAuth")}}const s=await r();s.success||i.error("LoginPage: Google login button failed",s.error)}catch(s){i.error("LoginPage: Failed to sign in with Google from button",s),e.target.disabled=!1}},children:[e.jsx("span",{className:"material-icons me-2",style:{fontSize:"1.2em",verticalAlign:"middle"},children:"login"}),"Accedi"]}),e.jsx("div",{className:"mt-4 text-muted small",children:e.jsxs("p",{className:"mb-1",children:[e.jsx("span",{className:"material-icons",style:{fontSize:"1rem",verticalAlign:"middle"},children:"info"})," ","Accesso riservato al personale autorizzato"]})})]})})})})})};export{l as LoginPage,l as default};
