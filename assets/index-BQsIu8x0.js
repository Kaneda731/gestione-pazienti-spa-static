const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-CxnGWnPr.js","assets/shared-DM1owLfs.js","assets/core-services-CSrwUk3W.js","assets/ui-vendor-CKm97sqn.js","assets/react-vendor-DMMrM9kC.js","assets/supabase-D6dgNb7x.js","assets/shared-DOcGBqNV.css","assets/LoginPage-BWgDzxKi.js","assets/PatientFormPage-5PrxiYt_.js","assets/InterventionForm-SHeRVJ6n.js","assets/patientService-BUKaJ6EC.js","assets/wizard-CLkC1M1I.css","assets/PatientListPage---HZuWA-.js","assets/useQuery-25yGgNuF.js","assets/useMutation-B5mVti9M.js","assets/DischargePage-BQDsueSz.js","assets/index-iSP8iFWl.js","assets/charts-vendor-BWtMAC_w.js","assets/DiagnosiPage-YYc0VsMA.js","assets/EventsPage-DCAl_Ijp.js","assets/EventFormWizard-Bv1Dto_A.js","assets/EventFormWizard-VHXo9iQq.css","assets/EventsPage-tn0RQdqM.css","assets/EventWizardPage-BYi_pd20.js"])))=>i.map(i=>d[i]);
import{u as e,o as t,i as s,a as i,j as n,k as r,s as a,l as o,_ as c,c as l,m as u,p as h,q as d,t as p,v as f,w as m,x as y,y as v}from"./core-services-CSrwUk3W.js";import{j as g,M as b,s as x,i as w,a as j,b as O}from"./shared-DM1owLfs.js";import{N as C,u as S,a as P,b as E,B as q,c as k,d as _}from"./react-vendor-DMMrM9kC.js";import"./ui-vendor-CKm97sqn.js";import"./supabase-D6dgNb7x.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),t.credentials="use-credentials"===e.crossOrigin?"include":"anonymous"===e.crossOrigin?"omit":"same-origin",t}(e);fetch(e.href,t)}}();const A=({isOpen:t,onToggle:s,routes:i})=>{const{user:n}=e(),r=n?.ruolo??null,a=i.filter(e=>((e,t)=>!e.permissions||0===e.permissions.length||!!t&&e.permissions.includes(t))(e,r));return g.jsxs("aside",{className:"app-sidebar bg-dark text-white d-flex flex-column "+(t?"open":"collapsed"),"aria-hidden":t?"false":"true",children:[g.jsxs("div",{className:"d-flex align-items-center justify-content-between p-3 border-bottom border-dark",children:[g.jsx("span",{className:"fw-semibold text-uppercase small",children:"Navigazione"}),g.jsx("button",{type:"button",className:"btn btn-sm btn-outline-light d-inline-flex align-items-center",onClick:s,"aria-label":"Close sidebar",children:g.jsx("span",{className:"material-icons","aria-hidden":"true",children:"close"})})]}),g.jsx("nav",{"aria-label":"Primary navigation",className:"flex-grow-1 overflow-auto",children:g.jsx("ul",{className:"nav flex-column py-2",children:a.map(e=>g.jsx("li",{className:"nav-item",children:g.jsxs(C,{to:e.path,className:({isActive:e})=>["nav-link text-white d-flex align-items-center gap-2 px-3 py-2",e?"active fw-semibold bg-primary-subtle text-dark rounded-1":""].filter(Boolean).join(" "),onClick:s,children:[e.icon&&g.jsx("span",{className:"material-icons","aria-hidden":"true",children:e.icon}),g.jsx("span",{children:e.label})]})},e.path))})})]})},N=[{path:"/home",label:"Home",icon:"home",permissions:["admin","medico","infermiere","operatore","lettore"]},{path:"/inserimento",label:"Inserimento",icon:"note_add",permissions:["admin","medico","infermiere"]},{path:"/list",label:"Elenco pazienti",icon:"list",permissions:["admin","medico","infermiere","operatore","lettore"]},{path:"/dimissione",label:"Dimissioni",icon:"logout",permissions:["admin","medico","infermiere"]},{path:"/unified-charts",label:"Grafici",icon:"query_stats",permissions:["admin","medico","infermiere","operatore","lettore"]},{path:"/diagnosi",label:"Diagnosi",icon:"healing",permissions:["admin"]},{path:"/eventi-clinici",label:"Eventi clinici",icon:"medical_services",permissions:["admin","medico","infermiere"]}];function R(){const[e,t]=s(),[a,o]=i.useState(e);i.useEffect(()=>{const s=n();s!==e&&t(s)},[e,t]),i.useEffect(()=>{o(e)},[e]);const c=i.useCallback(()=>{const e="dark"===a?"light":"dark";t(e),r(e),o(e)},[a,t]),l="dark"===a?"Tema chiaro":"Tema scuro";return g.jsxs("button",{type:"button",className:"btn btn-outline-secondary d-flex align-items-center gap-1",onClick:c,"aria-label":l,title:l,children:[g.jsx("span",{className:"material-icons","aria-hidden":"true",children:"dark"===a?"light_mode":"dark_mode"}),g.jsx("span",{className:"visually-hidden",children:l})]})}function D(){const{isAuthenticated:t,session:s}=e(),n=S(),r=i.useCallback(async()=>{if(t&&s)try{await a(),n("/login")}catch(e){o.error("Logout failed",e)}else try{await x()}catch(e){o.error("Failed to show login modal",e)}},[t,s,n]),c=t?"Esci":"Accedi";return g.jsxs("button",{type:"button",className:"btn btn-outline-secondary d-flex align-items-center gap-1",onClick:r,children:[g.jsx("span",{className:"material-icons","aria-hidden":"true",children:t?"logout":"login"}),g.jsx("span",{children:c})]})}function T({routes:t,theme:s}){const{user:n}=e(),r=S(),a=i.useMemo(()=>n?n.ruolo??n.role??null:null,[n]),o=i.useMemo(()=>t.filter(e=>((e,t)=>!e.permissions||0===e.permissions.length||!!t&&e.permissions.includes(t))(e,a)),[t,a]),c=i.useCallback(e=>{r(e)},[r]),l="dark"===s?"text-secondary":"text-dark";return g.jsx("ul",{className:"nav nav-pills gap-1 flex-grow-1",children:o.map(e=>g.jsx("li",{className:"nav-item",children:g.jsxs(C,{to:e.path,className:({isActive:e})=>["nav-link d-flex align-items-center gap-1 px-3 py-1",e?"active fw-600":l].filter(Boolean).join(" "),onClick:t=>{t.preventDefault(),c(e.path)},children:[e.icon&&g.jsx("span",{className:"material-icons","aria-hidden":"true",children:e.icon}),g.jsx("span",{children:e.label})]})},e.path))})}function F(){const{user:t,isAuthenticated:s}=e();if(!s||!t)return null;const i=t.ruolo??t.role??"caricamento...";return g.jsxs("div",{className:"d-flex align-items-center gap-2",children:[g.jsxs("span",{className:"navbar-text text-secondary me-1",title:t.email||void 0,style:{fontSize:"0.9em"},children:[g.jsx("i",{className:"material-icons me-1",style:{fontSize:"1em",verticalAlign:"text-bottom"},children:"account_circle"}),t.email?.split("@")[0]||""]}),g.jsx("span",{className:"badge bg-info text-uppercase",style:{fontSize:"0.7em",padding:"0.3em 0.5em"},title:`Ruolo: ${i}`,children:i})]})}const L=({children:e,sidebar:n=!0,header:r=!0})=>{const[a,o]=t(),c=S(),[l]=s(),[u,h]=i.useState(()=>"undefined"!=typeof window&&window.matchMedia("(max-width: 767px)").matches);return i.useEffect(()=>{if("undefined"==typeof window)return;const e=window.matchMedia("(max-width: 767px)"),t=e=>h(e.matches);return h(e.matches),e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}},[]),i.useEffect(()=>{if("undefined"!=typeof document)return document.body.classList.remove("mobile-filters-open"),document.body.style.removeProperty("overflow"),u?document.body.dataset.reactMobileNav="true":delete document.body.dataset.reactMobileNav,()=>{delete document.body.dataset.reactMobileNav,document.body.classList.remove("mobile-filters-open"),document.body.style.removeProperty("overflow")}},[u]),g.jsxs("div",{className:"app-shell d-flex min-vh-100",children:[n&&g.jsx(A,{isOpen:a,onToggle:o,routes:N}),g.jsxs("div",{className:"flex-grow-1 d-flex flex-column",style:{minHeight:0},children:[g.jsx("a",{className:"visually-hidden-focusable",href:"#main-content",children:"Salta al contenuto"}),r&&!u&&g.jsxs("header",{role:"banner",className:`navbar ${"dark"===l?"navbar-dark bg-dark":"navbar-light bg-light"} border-bottom d-flex flex-wrap align-items-center px-3 py-2 gap-3`,children:[g.jsxs("div",{className:"d-flex align-items-center gap-3 w-100",children:[n&&g.jsx("button",{type:"button",className:"btn btn-outline-primary d-inline-flex align-items-center d-lg-none",onClick:o,"aria-label":"Toggle sidebar",children:g.jsx("span",{className:"material-icons","aria-hidden":"true",children:"menu"})}),g.jsxs(C,{to:"/home",className:"navbar-brand mb-0 h5 text-decoration-none d-flex align-items-center flex-shrink-0",children:[g.jsx("img",{src:"/favicon.png",alt:"PatientTrack Logo",width:"48",height:"40",className:"d-inline-block align-text-top me-3 navbar-logo"}),g.jsx("span",{className:"d-none d-sm-inline",children:"PatientTrack"})]}),g.jsxs("div",{className:"d-flex align-items-center gap-2 ms-auto",children:[g.jsx(R,{}),g.jsx(D,{})]}),g.jsx(F,{})]}),g.jsx("nav",{className:"w-100 d-flex align-items-center gap-3",children:g.jsx(T,{routes:N,theme:l})})]}),r&&u&&g.jsx(b,{onNavigate:e=>c(e)}),g.jsx("main",{id:"main-content",role:"main",className:"flex-grow-1 p-3",style:u?{paddingTop:"5.5rem",overflowY:"auto",WebkitOverflowScrolling:"touch",minHeight:0,height:"100%"}:{minHeight:0},children:e})]})]})};const M=({children:t,allowedRoles:s=[],requireAuth:i=!0})=>{const{user:n,isAuthenticated:r}=e(),a=P(),o=function(){if("undefined"!=typeof window)return window.currentUser||null;return null}(),c=o&&(!(!(l=o.session)||"object"!=typeof l)&&"string"==typeof l.access_token&&"number"==typeof l.expires_at&&void 0!==l.user);var l;if(i&&!r&&!c)return g.jsx(E,{to:"/login",state:{from:a},replace:!0});let u=null;return n?u=n.role??null:o&&function(e){return!(!e||"object"!=typeof e)&&("string"==typeof e.id&&"string"==typeof e.email&&"string"==typeof e.role)}(o.profile)&&(u=o.profile.role??null),s.length>0&&u&&!s.includes(u)?g.jsx(E,{to:"/home",replace:!0}):g.jsx(g.Fragment,{children:t})};function I(){return g.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:g.jsx("div",{className:"spinner-border text-primary",role:"status",children:g.jsx("span",{className:"visually-hidden",children:"Caricamento in corso..."})})})}const Q=i.lazy(()=>c(()=>import("./HomePage-CxnGWnPr.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),z=i.lazy(()=>c(()=>import("./LoginPage-BWgDzxKi.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),K=i.lazy(()=>c(()=>import("./PatientFormPage-5PrxiYt_.js"),__vite__mapDeps([8,1,2,3,4,5,6,9,10,11]))),U=i.lazy(()=>c(()=>import("./PatientListPage---HZuWA-.js"),__vite__mapDeps([12,1,2,3,4,5,6,13,14,10]))),H=i.lazy(()=>c(()=>import("./DischargePage-BQDsueSz.js"),__vite__mapDeps([15,1,2,3,4,5,6,13,14,10]))),G=i.lazy(()=>c(()=>import("./index-iSP8iFWl.js"),__vite__mapDeps([16,1,2,3,4,5,6,17,13])).then(e=>({default:e.ChartsPage}))),V=i.lazy(()=>c(()=>import("./DiagnosiPage-YYc0VsMA.js"),__vite__mapDeps([18,1,2,3,4,5,6]))),B=i.lazy(()=>c(()=>import("./EventsPage-DCAl_Ijp.js"),__vite__mapDeps([19,1,2,3,4,5,6,13,14,10,20,12,21,11,9,22]))),$=i.lazy(()=>c(()=>import("./EventWizardPage-BYi_pd20.js"),__vite__mapDeps([23,1,2,3,4,5,6,20,10,12,13,14,21,11]))),J=[{path:"/",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(M,{allowedRoles:["admin","editor","viewer"],children:g.jsx(Q,{})})})},{path:"/home",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(M,{allowedRoles:["admin","editor","viewer"],children:g.jsx(Q,{})})})},{path:"/login",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(z,{})})},{path:"/inserimento",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(M,{allowedRoles:["admin","editor"],children:g.jsx(K,{})})})},{path:"/list",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(M,{allowedRoles:["admin","editor","viewer"],children:g.jsx(U,{})})})},{path:"/dimissione",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(M,{allowedRoles:["admin","editor"],children:g.jsx(H,{})})})},{path:"/unified-charts",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(M,{allowedRoles:["admin","editor","viewer"],children:g.jsx(G,{})})})},{path:"/diagnosi",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(M,{allowedRoles:["admin"],children:g.jsx(V,{})})})},{path:"/eventi-clinici",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(M,{allowedRoles:["admin","editor"],children:g.jsx(B,{})})})},{path:"/eventi-clinici/nuovo",element:g.jsx(i.Suspense,{fallback:g.jsx(I,{}),children:g.jsx(M,{allowedRoles:["admin","editor"],children:g.jsx($,{})})})},{path:"/grafico",element:g.jsx(E,{to:"/unified-charts",replace:!0})},{path:"/grafici-reparti",element:g.jsx(E,{to:"/unified-charts",replace:!0})},{path:"*",element:g.jsx(E,{to:"/home",replace:!0})}],W=i.createContext(void 0);function Y({children:e}){const[t,s]=i.useState({session:l.session,profile:l.profile,isLoading:l.isLoading});return i.useEffect(()=>{const e=()=>{s({session:l.session,profile:l.profile,isLoading:l.isLoading})};e();const t=setInterval(e,1e3);return()=>{clearInterval(t)}},[]),g.jsx(W.Provider,{value:t,children:e})}function Z(){return g.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:g.jsx("div",{className:"spinner-border text-primary",role:"status",children:g.jsx("span",{className:"visually-hidden",children:"Loading..."})})})}function X({error:e,resetError:t}){return g.jsx("div",{className:"container mt-5",children:g.jsxs("div",{className:"alert alert-danger",role:"alert",children:[g.jsx("h4",{className:"alert-heading",children:"Si √® verificato un errore"}),g.jsx("p",{children:e.message}),g.jsx("hr",{}),g.jsx("button",{className:"btn btn-primary",onClick:t,children:"Riprova"})]})})}class ee extends u.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){o.error("React Error Boundary caught error:",{error:e.message,stack:e.stack,componentStack:t.componentStack})}resetError=()=>{this.setState({hasError:!1,error:null})};render(){return this.state.hasError&&this.state.error?g.jsx(X,{error:this.state.error,resetError:this.resetError}):this.props.children}}function te(){const e=S();i.useEffect(()=>{d(e)},[e]);return k(J)}function se(){return i.useEffect(()=>(o.log("üöÄ React App mounted"),()=>{o.log("üëã React App unmounted")}),[]),i.useEffect(()=>{const e=()=>{const{setUser:e,setSession:t}=h.getState();if(l.profile&&l.session){const s={id:l.profile.id,email:l.profile.email||"",role:l.profile.role,full_name:l.profile.full_name,username:l.profile.username},i={access_token:l.session.access_token,refresh_token:l.session.refresh_token,expires_at:l.session.expires_at||0,expires_in:l.session.expires_in,token_type:l.session.token_type,user:s};e(s),t(i),o.log("‚úÖ Zustand store sincronizzato con currentUser")}else e(null),t(null)};return e(),window.addEventListener("auth:session-changed",e),window.addEventListener("auth-profile-loaded",e),()=>{window.removeEventListener("auth:session-changed",e),window.removeEventListener("auth-profile-loaded",e)}},[]),g.jsx(ee,{children:g.jsx(Y,{children:g.jsx(q,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:g.jsx(i.Suspense,{fallback:g.jsx(Z,{}),children:g.jsx(L,{children:g.jsx(te,{})})})})})})}var ie=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ne={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},re=new class{#e=ne;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}};var ae="undefined"==typeof window||"Deno"in globalThis;function oe(){}function ce(e){return"number"==typeof e&&e>=0&&e!==1/0}function le(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ue(e,t){return"function"==typeof e?e(t):e}function he(e,t){return"function"==typeof e?e(t):e}function de(e,t){const{type:s="all",exact:i,fetchStatus:n,predicate:r,queryKey:a,stale:o}=e;if(a)if(i){if(t.queryHash!==fe(a,t.options))return!1}else if(!ye(t.queryKey,a))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!n||n===t.state.fetchStatus)&&!(r&&!r(t)))}function pe(e,t){const{exact:s,status:i,predicate:n,mutationKey:r}=e;if(r){if(!t.options.mutationKey)return!1;if(s){if(me(t.options.mutationKey)!==me(r))return!1}else if(!ye(t.options.mutationKey,r))return!1}return(!i||t.state.status===i)&&!(n&&!n(t))}function fe(e,t){return(t?.queryKeyHashFn||me)(e)}function me(e){return JSON.stringify(e,(e,t)=>we(t)?Object.keys(t).sort().reduce((e,s)=>(e[s]=t[s],e),{}):t)}function ye(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(s=>ye(e[s],t[s])))}var ve=Object.prototype.hasOwnProperty;function ge(e,t){if(e===t)return e;const s=xe(e)&&xe(t);if(!(s||we(e)&&we(t)))return t;const i=(s?e:Object.keys(e)).length,n=s?t:Object.keys(t),r=n.length,a=s?new Array(r):{};let o=0;for(let c=0;c<r;c++){const r=s?c:n[c],l=e[r],u=t[r];if(l===u){a[r]=l,(s?c<i:ve.call(e,r))&&o++;continue}if(null===l||null===u||"object"!=typeof l||"object"!=typeof u){a[r]=u;continue}const h=ge(l,u);a[r]=h,h===l&&o++}return i===r&&o===i?e:a}function be(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function xe(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function we(e){if(!je(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!je(s)&&(!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function je(e){return"[object Object]"===Object.prototype.toString.call(e)}function Oe(e,t,s){return"function"==typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?ge(e,t):t}function Ce(e){return e}function Se(e,t,s=0){const i=[...e,t];return s&&i.length>s?i.slice(1):i}function Pe(e,t,s=0){const i=[t,...e];return s&&i.length>s?i.slice(0,-1):i}var Ee=Symbol();function qe(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==Ee?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function ke(e,t){return"function"==typeof e?e(...t):!!e}var _e=new class extends ie{#s;#i;#n;constructor(){super(),this.#n=e=>{if(!ae&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#i||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#i?.(),this.#i=void 0)}setEventListener(e){this.#n=e,this.#i?.(),this.#i=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#s!==e&&(this.#s=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#s?this.#s:"hidden"!==globalThis.document?.visibilityState}};function Ae(){let e,t;const s=new Promise((s,i)=>{e=s,t=i});function i(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch(()=>{}),s.resolve=t=>{i({status:"fulfilled",value:t}),e(t)},s.reject=e=>{i({status:"rejected",reason:e}),t(e)},s}var Ne=function(e){setTimeout(e,0)};var Re=function(){let e=[],t=0,s=e=>{e()},i=e=>{e()},n=Ne;const r=i=>{t?e.push(i):n(()=>{s(i)})};return{batch:r=>{let a;t++;try{a=r()}finally{t--,t||(()=>{const t=e;e=[],t.length&&n(()=>{i(()=>{t.forEach(e=>{s(e)})})})})()}return a},batchCalls:e=>(...t)=>{r(()=>{e(...t)})},schedule:r,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{i=e},setScheduler:e=>{n=e}}}(),De=new class extends ie{#r=!0;#i;#n;constructor(){super(),this.#n=e=>{if(!ae&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#i||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#i?.(),this.#i=void 0)}setEventListener(e){this.#n=e,this.#i?.(),this.#i=e(this.setOnline.bind(this))}setOnline(e){this.#r!==e&&(this.#r=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#r}};function Te(e){return Math.min(1e3*2**e,3e4)}function Fe(e){return"online"!==(e??"online")||De.isOnline()}var Le=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Me(e){let t,s=!1,i=0;const n=Ae(),r=()=>"pending"!==n.status,a=()=>_e.isFocused()&&("always"===e.networkMode||De.isOnline())&&e.canRun(),o=()=>Fe(e.networkMode)&&e.canRun(),c=e=>{r()||(t?.(),n.resolve(e))},l=e=>{r()||(t?.(),n.reject(e))},u=()=>new Promise(s=>{t=e=>{(r()||a())&&s(e)},e.onPause?.()}).then(()=>{t=void 0,r()||e.onContinue?.()}),h=()=>{if(r())return;let t;const n=0===i?e.initialPromise:void 0;try{t=n??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(c).catch(t=>{if(r())return;const n=e.retry??(ae?0:3),o=e.retryDelay??Te,c="function"==typeof o?o(i,t):o,d=!0===n||"number"==typeof n&&i<n||"function"==typeof n&&n(i,t);if(s||!d)return l(t),void 0;var p;i++,e.onFail?.(i,t),(p=c,new Promise(e=>{re.setTimeout(e,p)})).then(()=>a()?void 0:u()).then(()=>{s?l(t):h()})})};return{promise:n,status:()=>n.status,cancel:t=>{if(!r()){const s=new Le(t);l(s),e.onCancel?.(s)}},continue:()=>(t?.(),n),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:o,start:()=>(o()?h():u().then(h),n)}}var Ie=class{#a;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ce(this.gcTime)&&(this.#a=re.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ae?1/0:3e5))}clearGcTimeout(){this.#a&&(re.clearTimeout(this.#a),this.#a=void 0)}},Qe=class extends Ie{#o;#c;#l;#u;#h;#d;#p;constructor(e){super(),this.#p=!1,this.#d=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#u=e.client,this.#l=this.#u.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#o=Ke(this.options),this.state=e.state??this.#o,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#h?.promise}setOptions(e){if(this.options={...this.#d,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=Ke(this.options);void 0!==e.data&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#o=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#l.remove(this)}setData(e,t){const s=Oe(this.state.data,e,this.options);return this.#f({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#f({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#h?.promise;return this.#h?.cancel(e),t?t.then(oe).catch(oe):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#o)}isActive(){return this.observers.some(e=>!1!==he(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ee||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===ue(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!le(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#h?.continue()}onOnline(){const e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#h?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#l.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#h&&(this.#p?this.#h.cancel({revert:!0}):this.#h.cancelRetry()),this.scheduleGc()),this.#l.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#f({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#h?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#h)return this.#h.continueRetry(),this.#h.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const s=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#p=!0,s.signal)})},n=()=>{const e=qe(this.options,t),s=(()=>{const e={client:this.#u,queryKey:this.queryKey,meta:this.meta};return i(e),e})();return this.#p=!1,this.options.persister?this.options.persister(e,s,this):e(s)},r=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#u,state:this.state,fetchFn:n};return i(e),e})();this.options.behavior?.onFetch(r,this),this.#c=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===r.fetchOptions?.meta||this.#f({type:"fetch",meta:r.fetchOptions?.meta}),this.#h=Me({initialPromise:t?.initialPromise,fn:r.fetchFn,onCancel:e=>{e instanceof Le&&e.revert&&this.setState({...this.#c,fetchStatus:"idle"}),s.abort()},onFail:(e,t)=>{this.#f({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#f({type:"pause"})},onContinue:()=>{this.#f({type:"continue"})},retry:r.options.retry,retryDelay:r.options.retryDelay,networkMode:r.options.networkMode,canRun:()=>!0});try{const e=await this.#h.start();if(void 0===e)throw 0,new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#l.config.onSuccess?.(e,this),this.#l.config.onSettled?.(e,this.state.error,this),e}catch(a){if(a instanceof Le){if(a.silent)return this.#h.promise;if(a.revert){if(void 0===this.state.data)throw a;return this.state.data}}throw this.#f({type:"error",error:a}),this.#l.config.onError?.(a,this),this.#l.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#f(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...ze(t.data,this.options),fetchMeta:e.meta??null};case"success":const s={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#c=e.manual?s:void 0,s;case"error":const i=e.error;return{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),Re.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#l.notify({query:this,type:"updated",action:e})})}};function ze(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fe(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function Ke(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,i=s?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}function Ue(e){return{onFetch:(t,s)=>{const i=t.options,n=t.fetchOptions?.meta?.fetchMore?.direction,r=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},c=0;const l=async()=>{let s=!1;const l=qe(t.options,t.fetchOptions),u=async(e,i,n)=>{if(s)return Promise.reject();if(null==i&&e.pages.length)return Promise.resolve(e);const r=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:i,direction:n?"backward":"forward",meta:t.options.meta};return void Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?s=!0:t.signal.addEventListener("abort",()=>{s=!0}),t.signal)}),e})(),a=await l(r),{maxPages:o}=t.options,c=n?Pe:Se;return{pages:c(e.pages,a,o),pageParams:c(e.pageParams,i,o)}};if(n&&r.length){const e="backward"===n,t={pages:r,pageParams:a},s=(e?Ge:He)(i,t);o=await u(t,s,e)}else{const t=e??r.length;do{const e=0===c?a[0]??i.initialPageParam:He(i,o);if(c>0&&null==e)break;o=await u(o,e),c++}while(c<t)}return o};t.fetchFn=t.options.persister?()=>t.options.persister?.(l,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):l}}}function He(e,{pages:t,pageParams:s}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,s[i],s):void 0}function Ge(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}var Ve=class extends Ie{#u;#m;#y;#h;constructor(e){super(),this.#u=e.client,this.mutationId=e.mutationId,this.#y=e.mutationCache,this.#m=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#m.includes(e)||(this.#m.push(e),this.clearGcTimeout(),this.#y.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#m=this.#m.filter(t=>t!==e),this.scheduleGc(),this.#y.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#m.length||("pending"===this.state.status?this.scheduleGc():this.#y.remove(this))}continue(){return this.#h?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#f({type:"continue"})},s={client:this.#u,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#h=Me({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#f({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#f({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#y.canRun(this)});const i="pending"===this.state.status,n=!this.#h.canStart();try{if(i)t();else{this.#f({type:"pending",variables:e,isPaused:n}),await(this.#y.config.onMutate?.(e,this,s));const t=await(this.options.onMutate?.(e,s));t!==this.state.context&&this.#f({type:"pending",context:t,variables:e,isPaused:n})}const r=await this.#h.start();return await(this.#y.config.onSuccess?.(r,e,this.state.context,this,s)),await(this.options.onSuccess?.(r,e,this.state.context,s)),await(this.#y.config.onSettled?.(r,null,this.state.variables,this.state.context,this,s)),await(this.options.onSettled?.(r,null,e,this.state.context,s)),this.#f({type:"success",data:r}),r}catch(r){try{throw await(this.#y.config.onError?.(r,e,this.state.context,this,s)),await(this.options.onError?.(r,e,this.state.context,s)),await(this.#y.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this,s)),await(this.options.onSettled?.(void 0,r,e,this.state.context,s)),r}finally{this.#f({type:"error",error:r})}}finally{this.#y.runNext(this)}}#f(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),Re.batch(()=>{this.#m.forEach(t=>{t.onMutationUpdate(e)}),this.#y.notify({mutation:this,type:"updated",action:e})})}};function Be(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $e=class extends ie{constructor(e={}){super(),this.config=e,this.#v=new Set,this.#g=new Map,this.#b=0}#v;#g;#b;build(e,t,s){const i=new Ve({client:e,mutationCache:this,mutationId:++this.#b,options:e.defaultMutationOptions(t),state:s});return this.add(i),i}add(e){this.#v.add(e);const t=Je(e);if("string"==typeof t){const s=this.#g.get(t);s?s.push(e):this.#g.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#v.delete(e)){const t=Je(e);if("string"==typeof t){const s=this.#g.get(t);if(s)if(s.length>1){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&this.#g.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Je(e);if("string"==typeof t){const s=this.#g.get(t),i=s?.find(e=>"pending"===e.state.status);return!i||i===e}return!0}runNext(e){const t=Je(e);if("string"==typeof t){const s=this.#g.get(t)?.find(t=>t!==e&&t.state.isPaused);return s?.continue()??Promise.resolve()}return Promise.resolve()}clear(){Re.batch(()=>{this.#v.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#v.clear(),this.#g.clear()})}getAll(){return Array.from(this.#v)}find(e){const t={exact:!0,...e};return this.getAll().find(e=>pe(t,e))}findAll(e={}){return this.getAll().filter(t=>pe(e,t))}notify(e){Re.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Re.batch(()=>Promise.all(e.map(e=>e.continue().catch(oe))))}};function Je(e){return e.options.scope?.id}var We=class extends ie{constructor(e={}){super(),this.config=e,this.#x=new Map}#x;build(e,t,s){const i=t.queryKey,n=t.queryHash??fe(i,t);let r=this.get(n);return r||(r=new Qe({client:e,queryKey:i,queryHash:n,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(r)),r}add(e){this.#x.has(e.queryHash)||(this.#x.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#x.get(e.queryHash);t&&(e.destroy(),t===e&&this.#x.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Re.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#x.get(e)}getAll(){return[...this.#x.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>de(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>de(e,t)):t}notify(e){Re.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Re.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Re.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ye=i.createContext(void 0),Ze=e=>{const t=i.useContext(Ye);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Xe=({client:e,children:t})=>(i.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),g.jsx(Ye.Provider,{value:e,children:t}));const et=new class{#w;#y;#d;#j;#O;#C;#S;#P;constructor(e={}){this.#w=e.queryCache||new We,this.#y=e.mutationCache||new $e,this.#d=e.defaultOptions||{},this.#j=new Map,this.#O=new Map,this.#C=0}mount(){this.#C++,1===this.#C&&(this.#S=_e.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#w.onFocus())}),this.#P=De.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#w.onOnline())}))}unmount(){this.#C--,0===this.#C&&(this.#S?.(),this.#S=void 0,this.#P?.(),this.#P=void 0)}isFetching(e){return this.#w.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#y.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#w.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=this.#w.build(this,t),i=s.state.data;return void 0===i?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(ue(t.staleTime,s))&&void this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#w.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,s){const i=this.defaultQueryOptions({queryKey:e}),n=this.#w.get(i.queryHash),r=n?.state.data,a=function(e,t){return"function"==typeof e?e(t):e}(t,r);if(void 0!==a)return this.#w.build(this,i).setData(a,{...s,manual:!0})}setQueriesData(e,t,s){return Re.batch(()=>this.#w.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#w.get(t.queryHash)?.state}removeQueries(e){const t=this.#w;Re.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const s=this.#w;return Re.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},i=Re.batch(()=>this.#w.findAll(e).map(e=>e.cancel(s)));return Promise.all(i).then(oe).catch(oe)}invalidateQueries(e,t={}){return Re.batch(()=>(this.#w.findAll(e).forEach(e=>{e.invalidate()}),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},i=Re.batch(()=>this.#w.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(oe)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(i).then(oe)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=this.#w.build(this,t);return s.isStaleByTime(ue(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(oe).catch(oe)}fetchInfiniteQuery(e){return e.behavior=Ue(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(oe).catch(oe)}ensureInfiniteQueryData(e){return e.behavior=Ue(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return De.isOnline()?this.#y.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#w}getMutationCache(){return this.#y}getDefaultOptions(){return this.#d}setDefaultOptions(e){this.#d=e}setQueryDefaults(e,t){this.#j.set(me(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#j.values()],s={};return t.forEach(t=>{ye(e,t.queryKey)&&Object.assign(s,t.defaultOptions)}),s}setMutationDefaults(e,t){this.#O.set(me(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#O.values()],s={};return t.forEach(t=>{ye(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#d.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=fe(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ee&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#d.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#w.clear(),this.#y.clear()}},tt=!1;tt,window.currentUser=l,window.addEventListener("error",e=>{const t={timestamp:(new Date).toISOString(),context:"GLOBAL_ERROR",message:e.error?.message||e.message||"Unknown global error",filename:e.filename||"Unknown file",lineno:e.lineno||"Unknown line",colno:e.colno||"Unknown column",stack:e.error?.stack||"No stack trace",env:"production",url:window.location.href};try{const e=JSON.parse(localStorage.getItem("auth_errors")||"[]");e.push(t),e.length>10&&e.shift(),localStorage.setItem("auth_errors",JSON.stringify(e)),window.lastGlobalError=t,o.warn("üêõ Global error persisted:",t.message)}catch(s){o.warn("Failed to persist global error")}}),window.addEventListener("unhandledrejection",e=>{const t={timestamp:(new Date).toISOString(),context:"UNHANDLED_PROMISE",message:e.reason?.message||e.reason||"Unknown promise rejection",stack:e.reason?.stack||"No stack trace",env:"production",url:window.location.href};try{const e=JSON.parse(localStorage.getItem("auth_errors")||"[]");e.push(t),e.length>10&&e.shift(),localStorage.setItem("auth_errors",JSON.stringify(e)),window.lastPromiseError=t,o.warn("üêõ Promise rejection persisted:",t.message)}catch(s){o.warn("Failed to persist promise error")}}),window.addEventListener("load",async function(){try{o.log(`üöÄ Inizializzazione ${p.APP_NAME} v${p.APP_VERSION} (React)`),f(),m(),y(),w(),await v(e=>{o.log("‚úÖ Autenticazione inizializzata",e?"con sessione":"senza sessione")}),j(),o.log("‚úÖ Auth event listeners inizializzati");const e=document.getElementById("app");if(!e)throw new Error("Root element #app not found");const t=_.createRoot(e);u.lazy(()=>c(()=>import("./index-BXAdmnwS.js"),[]).then(e=>({default:e.ReactQueryDevtools})));t.render(g.jsx(u.StrictMode,{children:g.jsxs(Xe,{client:et,children:[g.jsx(se,{}),!1]})})),o.log("‚úÖ React App montata con successo")}catch(e){o.error("‚ùå Errore durante l'inizializzazione dell'applicazione:",e),document.body.innerHTML=O('\n      <div class="container mt-5">\n        <div class="alert alert-danger" role="alert">\n          <h4 class="alert-heading">Errore di inizializzazione</h4>\n          <p>Si √® verificato un errore durante l\'avvio dell\'applicazione.</p>\n          \n          <hr>\n          <p class="mb-0">Ricarica la pagina per riprovare.</p>\n        </div>\n      </div>\n    ')}});export{ie as S,oe as a,ke as b,ue as c,ce as d,re as e,_e as f,Be as g,me as h,ae as i,ze as j,Ce as k,Oe as l,Re as n,Ae as p,he as r,be as s,le as t,Ze as u};
