import{l as e}from"./index-BV53N-Af.js";import{Modal as n}from"./vendor-CQCqr9ER.js";import"./supabase-86D3GPeZ.js";class i{constructor(e={}){this.options={title:"Conferma",message:"Sei sicuro di voler continuare?",confirmText:"Conferma",cancelText:"Annulla",confirmClass:"btn-primary",icon:"help",...e},this.modalId=`confirm-modal-${Date.now()}`}show(){return new Promise(i=>{const t=this.render();document.body.insertAdjacentHTML("beforeend",t);const o=document.getElementById(this.modalId),s=o.querySelector(".btn-confirm"),a=o.querySelector(".btn-cancel");if(!n){e.error("Bootstrap Modal non è disponibile");const n=confirm(this.options.message);return o.remove(),i(n),void 0}try{const e=new n(o),t=()=>{this._defocus(o),e.hide(),i(!1)};s.addEventListener("click",()=>{this._defocus(o),e.hide(),i(!0)}),a.addEventListener("click",t),o.addEventListener("hide.bs.modal",()=>{this._defocus(o)}),o.addEventListener("hidden.bs.modal",()=>{o.remove()}),e.show()}catch(r){e.error("Errore nella gestione del modal:",r);const n=confirm(this.options.message);o.remove(),i(n)}})}_defocus(e){try{const n=document.activeElement;n&&e.contains(n)&&"function"==typeof n.blur&&n.blur()}catch{}}render(){return`\n            <div class="modal fade confirm-modal" id="${this.modalId}" tabindex="-1" aria-hidden="true">\n                <div class="modal-dialog modal-dialog-centered">\n                    <div class="modal-content">\n                        <div class="modal-header ${"btn-danger"===this.options.confirmClass?"":"btn-warning"===this.options.confirmClass?"warning":"btn-success"===this.options.confirmClass?"success":""}">\n                            <h5 class="modal-title">\n                                <span class="material-icons">${this.options.icon}</span>\n                                ${this.options.title}\n                            </h5>\n                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>\n                        </div>\n                        <div class="modal-body">\n                            <p>${this.options.message}</p>\n                        </div>\n                        <div class="modal-footer d-flex justify-content-center">\n                            <button type="button" class="btn btn-secondary btn-cancel" data-bs-dismiss="modal">\n                                ${this.options.cancelText}\n                            </button>\n                            <button type="button" class="btn ${this.options.confirmClass} btn-confirm">\n                                ${this.options.confirmText}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}static forDeletion(e="questo elemento"){return new i({title:"Conferma eliminazione",message:`Sei sicuro di voler eliminare ${e}? Questa azione non può essere annullata.`,confirmText:"Elimina",cancelText:"Annulla",confirmClass:"btn-danger",icon:"delete"})}static forDismissal(e){return new i({title:"Conferma dimissione",message:`Sei sicuro di voler dimettere il paziente ${e}?`,confirmText:"Dimetti",cancelText:"Annulla",confirmClass:"btn-warning",icon:"event_available"})}static forReactivation(e){return new i({title:"Conferma riattivazione",message:`Sei sicuro di voler riattivare il paziente ${e}?`,confirmText:"Riattiva",cancelText:"Annulla",confirmClass:"btn-success",icon:"undo"})}static forSaving(){return new i({title:"Conferma salvataggio",message:"Sei sicuro di voler salvare le modifiche?",confirmText:"Salva",cancelText:"Annulla",confirmClass:"btn-primary",icon:"save"})}static forUnsavedChanges(){return new i({title:"Modifiche non salvate",message:"Ci sono modifiche non salvate. Vuoi uscire senza salvare?",confirmText:"Esci senza salvare",cancelText:"Continua modifica",confirmClass:"btn-warning",icon:"warning"})}static forClinicalEventDeletion(){return new i({title:"Elimina evento clinico",message:"Sei sicuro di voler eliminare questo evento clinico? L'operazione non può essere annullata.",confirmText:"Elimina",cancelText:"Annulla",confirmClass:"btn-danger",icon:"delete_forever"})}static forDiagnosisDeletion(){return new i({title:"Elimina diagnosi",message:"Sei sicuro di voler eliminare questa diagnosi? L'operazione non può essere annullata.",confirmText:"Elimina",cancelText:"Annulla",confirmClass:"btn-danger",icon:"delete_forever"})}}export{i as ConfirmModal};
