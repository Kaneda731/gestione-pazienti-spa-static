import{l as t}from"./index-DwWAzvfw.js";import"./supabase-BkmsdzLq.js";import"./react-vendor-Bp2pLdQf.js";import"./ui-vendor-S6RcKJ66.js";class i{options;settings;container=null;notifications;handleResize;constructor(t={}){this.options={position:"top-right",maxVisible:5,...t},this.settings=this.options,this.container=this.createContainer(),this.notifications=new Map,this.handleResize=this.handleResizeImpl.bind(this),"undefined"!=typeof window&&window.addEventListener("resize",this.handleResize)}handleResizeImpl(){this.container&&this.options.position&&this.applyPositionStyles(this.container,this.options.position)}createContainer(){if("undefined"==typeof window||"undefined"==typeof document)return null;const t=document.getElementById("notification-container");t&&t.parentNode&&t.parentNode.removeChild(t);const i=document.createElement("div");i.id="notification-container";const e=this.options.position||"top-right";return i.className=`notification-container notification-container--${e}`,i.setAttribute("role","region"),i.setAttribute("aria-label","Notifiche di sistema"),i.setAttribute("aria-live","polite"),i.setAttribute("data-position",e),i.style.cssText="\n            position: fixed;\n            z-index: 1050;\n            display: flex;\n            flex-direction: column;\n            gap: 10px;\n            max-width: 400px;\n            pointer-events: auto;\n        ",this.applyPositionStyles(i,e),i.addEventListener("keydown",t=>{"Escape"===t.key&&this.clearAllNotifications()}),document.body&&document.body.appendChild(i),i}applyPositionStyles(t,i){if(!t)return;t.style.top="",t.style.right="",t.style.bottom="",t.style.left="",t.style.transform="";const e="20px";switch(i){case"top-left":t.style.top=e,t.style.left=e;break;case"top-center":t.style.top=e,t.style.left="50%",t.style.transform="translateX(-50%)";break;case"bottom-right":t.style.bottom=e,t.style.right=e;break;case"bottom-left":t.style.bottom=e,t.style.left=e;break;case"bottom-center":t.style.bottom=e,t.style.left="50%",t.style.transform="translateX(-50%)";break;default:t.style.top=e,t.style.right=e}}addNotification(t){if(!t)return;const i=t.dataset.id;i&&this.notifications.has(i)||(this.container?.appendChild(t),i&&this.notifications.set(i,t),this.enforceMaxVisible())}removeNotification(t){const i=this.notifications.get(t);i&&i.parentNode&&(i.parentNode.removeChild(i),this.notifications.delete(t),this.enforceMaxVisible())}clearAllNotifications(){this.notifications.forEach((t,i)=>{t.parentNode&&t.parentNode.removeChild(t)}),this.notifications.clear()}clear(){this.clearAllNotifications()}updateSettings(t){if(this.options={...this.options,...t},this.settings=this.options,t.position){const i=t.position;if(this.container?.setAttribute("data-position",i),this.container&&(this.container.className=`notification-container notification-container--${i}`,this.applyPositionStyles(this.container,i)),"undefined"!=typeof document){const t=new CustomEvent("notificationContainer:positionChanged",{detail:{position:i}});document.dispatchEvent(t)}}}updatePosition(e){if(!i.isValidPosition(e))return t.warn(`Posizione non supportata: ${e}. Posizioni valide: ${i.getSupportedPositions().join(", ")}`),void 0;this.updateSettings({position:e})}getNotifications(){return Array.from(this.notifications.values())}getVisibleNotifications(){return Array.from(this.notifications.values()).filter(t=>!t.hasAttribute("data-hidden")&&!t.hasAttribute("aria-hidden"))}enforceMaxVisible(){const t=this.options.maxVisible;if(!t||t<=0)return;const i=Array.from(this.notifications.values()),e=i.length;i.forEach((i,o)=>{o>=Math.max(0,e-t)?(i.removeAttribute("data-hidden"),i.removeAttribute("aria-hidden"),i.style.display=""):(i.setAttribute("data-hidden","true"),i.setAttribute("aria-hidden","true"),i.style.display="none")})}updateMaxVisible(t){if(this.options.maxVisible=t,this.settings.maxVisible=t,this.enforceMaxVisible(),"undefined"!=typeof document){const i=new CustomEvent("notificationContainer:maxVisibleChanged",{detail:{maxVisible:t}});document.dispatchEvent(i)}}destroy(){try{this.clearAllNotifications(),"undefined"!=typeof window&&window.removeEventListener("resize",this.handleResize),this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}finally{this.notifications.clear(),this.container=null}}getStatus(){const t=this.getNotifications(),i=this.getVisibleNotifications();return{totalNotifications:t.length,visibleNotifications:i.length,hiddenNotifications:t.length-i.length,position:this.options.position||"top-right",maxVisible:this.options.maxVisible}}static createResponsive(t={}){return new i({enableResponsive:!0,...t})}static createFixed(t,e=5){return new i({position:t,maxVisible:e,enableResponsive:!1,customPosition:!0})}static isValidPosition(t){return["top-right","top-left","top-center","bottom-right","bottom-left","bottom-center"].includes(t)}static getSupportedPositions(){return["top-right","top-left","top-center","bottom-right","bottom-left","bottom-center"]}}export{i as NotificationContainer,i as default};
