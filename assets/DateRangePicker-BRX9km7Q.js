import{j as e}from"./ui-vendor-CgDpQ-gO.js";import{R as t,b as a}from"./react-vendor-bU8fvvPN.js";import{d as n,n as r,i as l}from"./CentralizedStatisticsService-CVcbLe3Q.js";const s=()=>{if("undefined"!=typeof window&&"undefined"!=typeof localStorage){const e=localStorage.getItem("theme");if("light"===e||"dark"===e)return e}return"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},i=t.forwardRef(({id:t,value:i,onChange:o,label:c,placeholder:d="gg/mm/aaaa",description:u,isDisabled:m=!1,isRequired:h=!1,isInvalid:p=!1,errorMessage:g,minValue:v,maxValue:k,size:x="md",className:f,inputClassName:w,allowInput:b=!0,clearable:j=!0,autoFocus:y=!1},D)=>{const[N,C]=a.useState(!1),[S,M]=a.useState(()=>s()),[L,E]=a.useState(()=>"undefined"!=typeof window&&window.innerWidth<=576),[$,Y]=a.useState(()=>{if(i){const[e,t]=i.split("-");return new Date(parseInt(e),parseInt(t)-1)}return new Date}),[F,I]=a.useState(null),[R,V]=a.useState(()=>i?n(i):""),[z,A]=a.useState(!1),q=a.useRef(null);a.useEffect(()=>{const e=window.matchMedia("(max-width: 576px)"),t=e=>{E(e.matches)};return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}},[]),a.useEffect(()=>{const e=()=>{M(s())},t=t=>{"theme"!==t.key&&null!==t.key||e()};window.addEventListener("storage",t);const a=()=>{setTimeout(e,10)};document.addEventListener("theme-change",a),window.addEventListener("theme-change",a);const n=window.matchMedia("(prefers-color-scheme: dark)"),r=t=>{e()};return n.addEventListener("change",r),e(),()=>{window.removeEventListener("storage",t),document.removeEventListener("theme-change",a),window.removeEventListener("theme-change",a),n.removeEventListener("change",r)}},[]),a.useEffect(()=>{const e=e=>{"Escape"===e.key&&N&&(e.preventDefault(),C(!1))};if(N)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[N]),a.useEffect(()=>{const e=e=>{const t=e.target;q.current?.contains(t)||C(!1)};if(N)return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[N,D]),a.useEffect(()=>{z||V(i?n(i):"")},[i,z]);const B={sm:"form-control-sm",md:"",lg:"form-control-lg"}[x],W=`datepicker-${x}`,P=a.useCallback(e=>{const t=e.target.value;if(V(t),A(!0),!t.trim())return o(null),void 0;const a=r(t);a&&l(a)&&o(a)},[o]),T=a.useCallback(()=>{A(!1);const e=R.trim();if(!e)return o(null),V(""),void 0;const t=r(e);t&&l(t)?(o(t),V(n(t))):V(i?n(i):"")},[R,i,o]),O=a.useCallback(()=>{A(!0)},[]),G=a.useCallback(e=>{const t=e.target.value;if(!t)return o(null),void 0;l(t)&&o(t)},[o]),K=a.useCallback(()=>{o(null),V(""),A(!1)},[o]),U=a.useCallback(e=>{const t=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String(e).padStart(2,"0")}`;o(t),V(n(t)),C(!1),A(!1)},[$,o]),H=a.useCallback(()=>{Y(e=>new Date(e.getFullYear(),e.getMonth()-1))},[]),J=a.useCallback(()=>{Y(e=>new Date(e.getFullYear(),e.getMonth()+1))},[]),Q=a.useMemo(()=>{const e=$.getFullYear(),t=$.getMonth(),a=new Date(e,t,1),n=new Date(e,t+1,0).getDate(),r=a.getDay(),l=[];for(let s=0;s<r;s++)l.push(null);for(let s=1;s<=n;s++)l.push(s);return l},[$]),X=a.useMemo(()=>{const e=(new Date).getFullYear(),t=[];for(let a=e-100;a<=e+10;a++)t.push(a);return t},[]),Z=a.useMemo(()=>Array.from({length:12},(e,t)=>{const a=new Date(2025,t);return{value:t,label:new Intl.DateTimeFormat("it-IT",{month:"long"}).format(a)}}),[]),_=a.useCallback(e=>{const t=parseInt(e.target.value);Y(e=>new Date(e.getFullYear(),t))},[]),ee=a.useCallback(e=>{const t=parseInt(e.target.value);Y(e=>new Date(t,e.getMonth()))},[]),te=a.useCallback(e=>{if("Escape"===e.key&&N)e.preventDefault(),C(!1);else if(N&&"ArrowUp"===e.key)if(e.preventDefault(),F){const e=F-7;e>0&&I(e)}else I(1);else if(N&&"ArrowDown"===e.key)if(e.preventDefault(),F){const e=F+7;e<=31&&I(e)}else I(1);else if(N&&"ArrowLeft"===e.key){if(e.preventDefault(),F&&F>1)I(F-1);else if(1===F){const e=new Date($.getFullYear(),$.getMonth(),0).getDate();Y(new Date($.getFullYear(),$.getMonth()-1)),I(e)}}else if(N&&"ArrowRight"===e.key){e.preventDefault();const t=new Date($.getFullYear(),$.getMonth()+1,0).getDate();F&&F<t?I(F+1):F===t&&(Y(new Date($.getFullYear(),$.getMonth()+1)),I(1))}else if(N&&"Enter"===e.key&&F){e.preventDefault();const t=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String(F).padStart(2,"0")}`;o(t),C(!1),I(null)}},[N,F,$,o]);return e.jsxs("div",{ref:q,className:`datepicker-wrapper ${W} datepicker-${S} ${f||""}`,children:[c&&e.jsxs("label",{className:"form-label",htmlFor:t,children:[c,h&&e.jsx("span",{className:"required-asterisk",children:"*"})]}),e.jsx("div",{className:"datepicker-input-group "+(p?"is-invalid":""),children:L?e.jsx("input",{id:t,type:"date",className:`form-control ${B} datepicker-input native-date-input ${w||""} ${p?"is-invalid":""}`,value:i||"",onChange:G,disabled:m,autoFocus:y,min:v?String(v):void 0,max:k?String(k):void 0}):e.jsxs(e.Fragment,{children:[e.jsx("input",{id:t,type:"text",className:`form-control ${B} datepicker-input ${w||""} ${p?"is-invalid":""}`,placeholder:d,value:R,onChange:P,onBlur:T,onFocus:O,onKeyDown:te,disabled:m,autoFocus:y,readOnly:!b}),e.jsx("button",{type:"button",className:"datepicker-trigger-btn",onClick:()=>C(!N),disabled:m,"aria-label":"Apri date picker",children:e.jsxs("svg",{className:"datepicker-icon",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"3",ry:"3"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),e.jsx("circle",{cx:"8",cy:"15",r:"1",fill:"currentColor",stroke:"none"}),e.jsx("circle",{cx:"12",cy:"15",r:"1",fill:"currentColor",stroke:"none"}),e.jsx("circle",{cx:"16",cy:"15",r:"1",fill:"currentColor",stroke:"none"})]})}),j&&R&&e.jsx("button",{type:"button",className:"datepicker-clear-btn",onClick:K,disabled:m,"aria-label":"Cancella data",children:e.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"17",y1:"7",x2:"7",y2:"17"}),e.jsx("line",{x1:"7",y1:"7",x2:"17",y2:"17"})]})})]})}),u&&e.jsx("small",{className:"form-text",children:u}),p&&g&&e.jsx("div",{className:"invalid-feedback d-block",children:g}),N&&!m&&!L&&e.jsx("div",{className:"datepicker-calendar-popup",children:e.jsxs("div",{className:"datepicker-calendar",children:[e.jsxs("div",{className:"datepicker-calendar-header",children:[e.jsx("button",{type:"button",className:"datepicker-nav-btn datepicker-nav-prev",onClick:H,"aria-label":"Mese precedente",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})})}),e.jsxs("div",{className:"datepicker-dropdown-controls",children:[e.jsx("select",{className:"datepicker-month-select",value:$.getMonth(),onChange:_,"aria-label":"Seleziona mese",children:Z.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("select",{className:"datepicker-year-select",value:$.getFullYear(),onChange:ee,"aria-label":"Seleziona anno",children:X.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx("button",{type:"button",className:"datepicker-nav-btn datepicker-nav-next",onClick:J,"aria-label":"Mese successivo",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),e.jsxs("table",{className:"datepicker-calendar-grid",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"].map(t=>e.jsx("th",{className:"datepicker-weekday",children:t},t))})}),e.jsx("tbody",{children:Array.from({length:Math.ceil(Q.length/7)},(t,a)=>e.jsx("tr",{className:"datepicker-week",children:Array.from({length:7},(t,n)=>{const r=Q[7*a+n];if(null===r)return e.jsx("td",{className:"datepicker-day-cell"},n);const l=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String(r).padStart(2,"0")}`,s=i===l,o=l===(new Date).toISOString().split("T")[0];return e.jsx("td",{className:"datepicker-day-cell",children:e.jsx("button",{type:"button",className:`datepicker-day ${s?"selected":""} ${o?"today":""} ${F===r?"focused":""}`,onClick:()=>U(r),children:r})},n)})},a))})]})]})})]})});i.displayName="DatePicker";const o=t.forwardRef(({startDate:t,endDate:a,onStartDateChange:n,onEndDateChange:r,startLabel:l="Start Date",endLabel:s="End Date",startPlaceholder:o="DD/MM/YYYY",endPlaceholder:c="DD/MM/YYYY",description:d,isDisabled:u=!1,isRequired:m=!1,isInvalid:h=!1,errorMessage:p,minValue:g,maxValue:v,size:k="md",className:x,allowInput:f=!0,clearable:w=!0},b)=>{const j=(()=>{if(!t||!a)return!0;try{const e=new Date(t);return e<=new Date(a)}catch{return!1}})(),y=h||!j;return e.jsxs("div",{ref:b,className:`date-range-picker-wrapper ${x||""}`,"aria-describedby":d?"daterange-description":void 0,children:[d&&e.jsx("p",{id:"daterange-description",className:"form-text mb-2",children:d}),e.jsxs("div",{className:"date-range-inputs",children:[e.jsx("div",{className:"date-range-input-group",children:e.jsx(i,{value:t,onChange:n,label:l,placeholder:o,isDisabled:u,isRequired:m,minValue:g,maxValue:v,size:k,allowInput:f,clearable:w,isInvalid:y})}),e.jsx("div",{className:"date-range-separator",children:"â†’"}),e.jsx("div",{className:"date-range-input-group",children:e.jsx(i,{value:a,onChange:r,label:s,placeholder:c,isDisabled:u,isRequired:m,minValue:g,maxValue:v,size:k,allowInput:f,clearable:w,isInvalid:y})})]}),y&&!j&&e.jsx("div",{className:"invalid-feedback d-block",children:"La data di inizio deve essere prima della data di fine"}),y&&p&&e.jsx("div",{className:"invalid-feedback d-block",children:p})]})});o.displayName="DateRangePicker";export{i as D,o as a};
