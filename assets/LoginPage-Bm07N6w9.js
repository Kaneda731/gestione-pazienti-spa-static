import{j as o}from"./ui-vendor-S6RcKJ66.js";import{u as e,b as a}from"./react-vendor-Bp2pLdQf.js";import{u as i,l as s,g as n,c as t,d as r}from"./index-BHoTB4ha.js";import"./supabase-Zkii_ZbW.js";const c=()=>{const c=e(),{isAuthenticated:l}=i();return a.useEffect(()=>{l&&c("/home")},[l,c]),o.jsx("div",{className:"login-container",children:o.jsx("div",{className:"login-card-wrapper",children:o.jsx("div",{className:"container",children:o.jsx("div",{className:"row",children:o.jsx("div",{className:"col-12 col-md-8 col-lg-6 col-xl-4 mx-auto",children:o.jsx("div",{className:"login-card card",children:o.jsxs("div",{className:"card-body",children:[o.jsx("div",{className:"login-logo-container",children:o.jsx("img",{src:"/assets/logo-CtGPvgcF.png",alt:"PatientTrack Logo",loading:"lazy"})}),o.jsx("h1",{className:"login-title",children:"PatientTrack"}),o.jsx("p",{className:"login-subtitle",children:"Sistema di gestione pazienti"}),o.jsx("div",{className:"login-button-wrapper",children:o.jsxs("button",{type:"button",className:"login-button btn",onClick:async o=>{o.target.disabled=!0;try{const o="1096813530815-bk23h9jv77okogb6pb2k0mtqbb5fo1n0.apps.googleusercontent.com";if(!0&&o){s.info("üöÄ LoginPage: avvio flow GIS diretto (skip incognito check)");try{const{idToken:e,nonce:a}=await n({clientId:o}),{error:i}=await t.auth.signInWithIdToken({provider:"google",token:e,nonce:a});if(i)throw s.warn("‚ùå Errore Supabase signInWithIdToken:",i),i;return s.info("‚úÖ LoginPage: Login GIS completato"),void 0}catch(e){s.warn("‚ùå LoginPage: Errore GIS, fallback a OAuth veloce")}}s.info("üîÑ LoginPage: avvio OAuth redirect");const a=await r();a.success||s.error("LoginPage: Google login button failed",a.error)}catch(a){s.error("LoginPage: Failed to sign in with Google from button",a),o.target.disabled=!1}},children:[o.jsx("span",{className:"material-icons",children:"login"}),"Accedi con Google"]})}),o.jsx("div",{className:"login-info-box",children:o.jsxs("p",{className:"login-info-text",children:[o.jsx("span",{className:"material-icons",children:"info"}),"Accesso riservato al personale autorizzato"]})})]})})})})})})})};export{c as LoginPage,c as default};
